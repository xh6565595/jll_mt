{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/skia/Desktop/work/jll_mt/pages/login/login.vue?feee","webpack:////Users/skia/Desktop/work/jll_mt/pages/login/login.vue?7343","webpack:////Users/skia/Desktop/work/jll_mt/pages/login/login.vue?78fc","uni-app:///pages/login/login.vue","webpack:////Users/skia/Desktop/work/jll_mt/pages/login/login.vue?dcbb","webpack:////Users/skia/Desktop/work/jll_mt/pages/login/login.vue?2323"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wLAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkCv1B;AACA;;;AAGA,gD;;;AAGA;AACA,MADA,kBACA;AACA;AACA,qBADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,mBAJA;AAKA;AACA,oBADA;AAEA,sBAFA;AAGA,oBAHA;AAIA,wBAJA,EAIA;AACA,sBALA,EAKA;AACA,wBANA,EAMA;AACA,2BAPA,CAOA;AAPA,OALA;AAcA,gBAdA;AAeA,gBAfA;AAgBA,kCAhBA;;AAkBA,GApBA;AAqBA;AACA,sBADA;AAEA,sBAFA,EArBA;;AAyBA,QAzBA,kBAyBA,OAzBA,EAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAJA,MAIA;;AAEA;AACA;AACA,GA7CA;AA8CA,2GA9CA;AA+CA;AACA,WADA,mBACA,IADA,EACA;AACA,oBADA,GACA,KADA;;AAGA,wCAHA;AAIA;AACA,iCADA;AAEA,uBAFA,CAJA,SAIA,GAJA;AAOA;AACA;AACA,sBADA,GACA,OADA;AAEA;AACA;;AAEA,iBALA,MAKA;AACA;;AAEA,iBAhBA;;AAkBA,uCAlBA;;AAoBA,KArBA;AAsBA;AACA,UAvBA,oBAuBA;AACA,oBADA,GACA,MADA;AAEA,+CAFA;AAGA,oFAHA;AAIA,8CAJA;;;;;AASA;AACA;AAVA,0CAWA,mDAXA,QAWA,GAXA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAPA,GAOA,eAPA;AAQA;AACA;;AAEA,iBAXA,MAWA;AACA;AACA;AACA;;AAEA;AACA,iBA/BA;;AAiCA;AACA,6BAlCA;;AAoCA,KA3DA;AA4DA;AACA,SA7DA,mBA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArEA;AAsEA;AACA,SAvEA,iBAuEA,CAvEA,EAuEA;AACA;AACA,KAzEA;AA0EA;AACA,UA3EA,kBA2EA,CA3EA,EA2EA;AACA;AACA;AACA;AACA,KA/EA;AAgFA;AACA,YAjFA,sBAiFA;AACA,gCADA;AAEA,oBAFA,GAEA,MAFA;AAGA,iGAHA;AAIA,+CAJA;;;AAOA;AACA,oBARA,GAQA;AACA,kDADA;AAEA,yBAFA,CAEA;AAFA,iBARA;;AAaA,yCAbA;AAcA,qDAdA,UAcA,GAdA;AAeA;AACA;AACA;AACA;AACA,mCADA;AAEA,sCAFA;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBANA,EAMA,IANA;AAOA,iBAfA,MAeA;AACA;AACA,gCADA;AAEA,qDAFA;;AAIA,iBArCA;;AAuCA,2DAvCA;;;AA0CA,KA3HA;AA4HA,kBA5HA,0BA4HA,CA5HA,EA4HA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,gCADA;AAEA;AACA;AACA;AACA;AACA,eANA;;AAQA;AACA,SAzBA;AA0BA,YA1BA,gBA0BA,CA1BA,EA0BA,iBA1BA;;AA4BA,KA7JA;AA8JA;AACA,eA/JA,uBA+JA,GA/JA,EA+JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA,aANA;;AAQA;AACA;;;;AAIA,KAxLA;AAyLA;AACA,aA1LA,qBA0LA,IA1LA,EA0LA;AACA,oBADA,GACA,MADA;;;;AAKA;AACA,gCADA;AAEA,uBAFA,CALA,SAKA,GALA;AAQA;;AAEA;AACA;AACA;;AAEA,iBAJA,MAIA;;AAEA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA,iBArBA;;;;;;;;;;AA+BA,KAzNA;AA0NA;AACA,YA3NA,oBA2NA,QA3NA,EA2NA;AACA,oBADA,GACA,MADA;;;;AAKA,oDALA,SAKA,GALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA;;AAGA,uBANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFADA;;AAGA,yBAJA,MAIA;AACA;AACA,mDADA;;AAGA;AACA;AACA,qBAtBA,EAsBA,GAtBA;;AAwBA;AACA,iBA7BA,MA6BA;AACA;AACA;AACA,yCAvCA;;AAyCA,2DAzCA;;AA2CA,KAtQA,EA/CA,E;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AAAA;AAA0hD,CAAgB,25CAAG,EAAC,C;;;;;;;;;;;ACA9iD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&scoped=true&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b237504c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&scoped=true&\"","var components\ntry {\n  components = {\n    accredit: function() {\n      return import(\n        /* webpackChunkName: \"components/accredit/accredit\" */ \"@/components/accredit/accredit.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"pages flex flex_center flex_y\">\r\n\t\t<image src=\"../../static/image/logo.png\" mode=\"scaleToFill\" class=\"logo\"></image>\r\n\t\t<text class=\"name\">GLLO健康智能马桶</text>\r\n\t\t<text class=\"text\">您尚未登录</text>\r\n\t\t<text class=\"text\">需要获取您的授权之后完成登录</text>\r\n\t\t<button v-if=\"canIUseGetUserProfile\" class=\"btns\" @click=\"getUserProfile\"> 微信一键登录 </button>\r\n\t\t<button type=\"success\" v-else class=\"btns\" open-type=\"getUserInfo\" @getuserinfo=\"getuserinfo\">微信登录</button>\r\n\r\n\t\t<accredit ref=\"userBox\">\r\n\t\t\t<view class=\"formBox\" slot=\"content\">\r\n\t\t\t\t<view class=\"cm_title cm_tex_c title\"> 账户绑定</view>\r\n\t\t\t\t<view class=\" inputBoxs \">\r\n\t\t\t\t\t<text class=\"cm_title label  \">手机号码:</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\" inputBoxs  flex flex_center cm_bdb\">\r\n\t\t\t\t\t<input class=\"cm_tex_l f1 inp\" type=\"number\" v-model=\"formParams.mobile\" placeholder=\"请输入手机号\">\r\n\t\t\t\t\t<view class=\"yzmBtn\" size=\"mini\" hover-class=\"cm_hover\" @tap=\"_getCode\">\r\n\t\t\t\t\t\t{{seconds>0?seconds+'s':'发送验证码'}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\" inputBoxs \">\r\n\t\t\t\t\t<text class=\"cm_title label  \">验证码:</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\" \">\r\n\t\t\t\t\t<one-input ref=\"hi\" type=\"box\" @finish=\"finish\" @input=\"input\" :maxlength=\"6\"></one-input>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button type=\"success\" class=\"btns\" @tap=\"submit\">立即登录</button>\r\n\t\t\t</view>\r\n\t\t</accredit>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Utils from '@/utils/utils.js';\r\n\timport http from '@/utils/http/index.js';\r\n\timport oneInput from '@/components/myp-one/myp-one';\r\n\timport accredit from '@/components/accredit/accredit';\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloadModal: true,\r\n\t\t\t\tupdatedInfo: {},\r\n\t\t\t\tresult: '',\r\n\t\t\t\teffective: '',\r\n\t\t\t\tformParams: {\r\n\t\t\t\t\t\"openId\": \"\",\r\n\t\t\t\t\t\"vilidate\": \"\",\r\n\t\t\t\t\t\"mobile\": \"\",\r\n\t\t\t\t\t\"invitation\": \"\", //邀请码\r\n\t\t\t\t\t\"nickname\": \"\", //微信昵称\r\n\t\t\t\t\t\"headimgurl\": \"\", //用户头像\r\n\t\t\t\t\t\"share_user_id\": \"\", //userid 分享活动\r\n\t\t\t\t},\r\n\t\t\t\tseconds: 0,\r\n\t\t\t\ttime: null,\r\n\t\t\t\tcanIUseGetUserProfile: false\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\taccredit,\r\n\t\t\toneInput\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconst jll_opid = uni.getStorageSync('jll_opid');\r\n\t\t\tthis.formParams.invitation = this.iviCode\r\n\t\t\tthis.formParams.share_user_id = this.shareUser\r\n\t\t\tthis.formParams.openId = jll_opid\r\n\t\t\t// if( this.iviCode){\r\n\t\t\t// \tuni.showModal({\r\n\t\t\t// \t\ttitle:'发现邀请码',\r\n\t\t\t// \t\tcontent:this.iviCode,\r\n\t\t\t// \t\tshowCancel:true\r\n\t\t\t// \t})\r\n\t\t\t// }\r\n\t\t\tif (uni.getUserProfile) {\n\t\t\t\t\r\n\t\t\t\tthis.canIUseGetUserProfile =true\r\n\t\t\t\t \r\n\t\t\t}else{\n\t\t\t\t\n\t\t\t}\n\t\t\t// debugger\r\n\t\t},\r\n\t\tcomputed: mapState(['shareUser', 'iviCode', 'sharePro', 'shareOrder', 'userInfo', 'hasLogin']),\r\n\t\tmethods: {\r\n\t\t\tasync getopId(code) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.$ui.showloading()\r\n\t\t\t\t\tlet res = await this.$api.GetOpenId({\r\n\t\t\t\t\t\twx_code: code\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\tthis.$ui.hideloading()\r\n\t\t\t\t\tif (res.Success) {\r\n\t\t\t\t\t\tlet opid = res.Msg;\r\n\t\t\t\t\t\tuni.setStorageSync('jll_opid', opid);\r\n\t\t\t\t\t\tthat.autoLogin(opid)\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.$ui.hideloading()\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthat.$ui.hideloading()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 立即注册\r\n\t\t\tasync submit() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tconsole.log(this.formParams);\r\n\t\t\t\tif (!this.formParams.vilidate || this.formParams.vilidate.length < 6) {\r\n\t\t\t\t\tthis.$ui.toast('请输入正确的验证码')\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.$ui.showloading()\r\n\t\t\t\t\t//console.log(this.formParams)\r\n\t\t\t\t\tlet res = await this.$api.WxAutoRegiste(this.formParams, false);\r\n\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\tthis.$ui.hideloading()\r\n\t\t\t\t\tif (res.Success) {\r\n\t\t\t\t\t\t// that.$ui.toast('登陆成功')\r\n\t\t\t\t\t\t// that.$store.commit('login');\r\n\t\t\t\t\t\tthat.$refs.userBox.hideModal()\r\n\t\t\t\t\t\t// uni.redirectTo()({\r\n\t\t\t\t\t\t// \turl: '/pages/main/main'\r\n\t\t\t\t\t\t// });\t\r\n\t\t\t\t\t\tlet opid = res.Data.openId;\r\n\t\t\t\t\t\tthat.autoLogin(opid)\r\n\t\t\t\t\t\t// that.$refs.userBox.hideModal()\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (res.Msg) {\r\n\t\t\t\t\t\t\tthis.$ui.toast(res.Msg)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthat.reset()\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tthat.$ui.toast(err)\r\n\t\t\t\t\tthat.reset()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 重置表单\r\n\t\t\treset() {\r\n\t\t\t\tthis.$refs.userBox.hideModal();\r\n\t\t\t\tthis.seconds = 0\r\n\t\t\t\tthis.effective = ''\r\n\t\t\t\tthis.formParams.vilidate = ''\r\n\t\t\t\tclearInterval(this.time)\r\n\t\t\t\tthis.time = null\r\n\t\t\t\tthis.$refs.hi.set('')\r\n\t\t\t},\r\n\t\t\t// 实时同步\r\n\t\t\tinput(e) {\r\n\t\t\t\tthis.formParams.vilidate = e\r\n\t\t\t},\r\n\t\t\t// 输完验证码码回调\r\n\t\t\tfinish(e) {\r\n\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\tthis.submit()\r\n\t\t\t\t// this.reset()\r\n\t\t\t},\r\n\t\t\t// 获取验证码\r\n\t\t\tasync _getCode() {\r\n\t\t\t\tif (this.effective) return;\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tif (!this.formParams.mobile || !Utils.phoneCheck(this.formParams.mobile)) {\r\n\t\t\t\t\tthis.$ui.toast('请输入正确的手机号码')\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(this.formParams)\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tmobile: this.formParams.mobile,\r\n\t\t\t\t\ttype: 1 //1,注册 2,登录 3,找回 4.银行卡 8-提现\r\n\t\t\t\t};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.$ui.showloading()\r\n\t\t\t\t\tlet res = await this.$api.getVerificateCode(data);\r\n\t\t\t\t\tthis.$ui.hideloading()\r\n\t\t\t\t\t// console.log(JSON.stringify(res))\r\n\t\t\t\t\tif (res.Success) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '验证码已发送',\r\n\t\t\t\t\t\t\tposition: 'bottom'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tself.effective = true;\r\n\t\t\t\t\t\tself.seconds = 60;\r\n\t\t\t\t\t\tthis.time = setInterval(() => {\r\n\t\t\t\t\t\t\tself.seconds -= 1;\r\n\t\t\t\t\t\t\tif (self.seconds == 0) {\r\n\t\t\t\t\t\t\t\tself.effective = false;\r\n\t\t\t\t\t\t\t\tclearInterval(this.time)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.Msg ? res.Msg : '未知错误',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log('请求结果false : ' + err)\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserProfile(e) {\n\t\t\t\tlet  that = this\n\t\t\t\t// debugger\r\n\t\t\t\t// 推荐使用wx.getUserProfile获取用户信息，开发者每次通过该接口获取用户个人信息均需用户确认\r\n\t\t\t\t// 开发者妥善保管用户快速填写的头像昵称，避免重复弹窗\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc: '获取您的信息头像和昵称', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// this.setData({\r\n\t\t\t\t\t\t//   userInfo: res.userInfo,\r\n\t\t\t\t\t\t//   hasUserInfo: true\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\tthis.formParams.nickname = res.userInfo.nickName\r\n\t\t\t\t\t\tthis.formParams.headimgurl = res.userInfo.avatarUrl\r\n\r\n\t\t\t\t\t\tconst jll_opid = uni.getStorageSync('jll_opid');\r\n\t\t\t\t\t\tif (jll_opid) {\r\n\t\t\t\t\t\t\tthat.autoLogin(jll_opid)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tlet code = res.code;\r\n\t\t\t\t\t\t\t\t\t// 获取code换opid\r\n\t\t\t\t\t\t\t\t\tthat.getopId(code)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e){console.log(e)}\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取个人信息\r\n\t\t\tgetuserinfo(res) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet userInfo = res.detail.userInfo\r\n\t\t\t\tconsole.log(res)\n\t\t\t\tif(userInfo){\n\t\t\t\t\t\tthis.formParams.nickname = userInfo.nickName\n\t\t\t\t\t\tthis.formParams.headimgurl = userInfo.avatarUrl\n\t\t\t\t\t\treturn\n\t\t\t\t\t\tconst jll_opid = uni.getStorageSync('jll_opid');\n\t\t\t\t\t\tif (jll_opid) {\n\t\t\t\t\t\t\tthat.autoLogin(jll_opid)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.login({\n\t\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t\tlet code = res.code;\n\t\t\t\t\t\t\t\t\t// 获取code换opid\n\t\t\t\t\t\t\t\t\tthat.getopId(code)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\r\n\t\t\t},\r\n\t\t\t// opid直接登录\r\n\t\t\tasync autoLogin(opid) {\r\n\t\t\t\tlet that = this;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// this.$ui.showloading()\r\n\t\t\t\t\tlet res = await this.$api.WxTokenLogin({\r\n\t\t\t\t\t\topenId: opid\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\t// this.$ui.hideloading()\r\n\r\n\t\t\t\t\tif (res.Success) {\r\n\t\t\t\t\t\tuni.setStorageSync('access_token', res.Data.hp)\r\n\t\t\t\t\t\tthat.initUser()\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif (res.Msg && res.Msg != '用户不存在') {\r\n\t\t\t\t\t\t\tthis.$ui.toast(res.Msg)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$refs.userBox.showModal();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\t// console.log('请求结果false : ' + err);\r\n\t\t\t\t\t// uni.redirectTo({\r\n\t\t\t\t\t// \turl: '/pages/main/main'\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// uni.redirectTo({\r\n\t\t\t\t\t// \turl: '/pages/main/main'\r\n\t\t\t\t\t// });\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 加载登录账户信息\r\n\t\t\tasync initUser(callback) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// this.$ui.showloading();\r\n\r\n\t\t\t\t\tlet res = await this.$api.getConsumer({}, false);\r\n\r\n\t\t\t\t\tif (res.Success) {\r\n\t\t\t\t\t\tif (res.Data) {\r\n\t\t\t\t\t\t\tthat.$store.commit('setUserInfo', res.Data);\r\n\t\t\t\t\t\t\tthat.$store.commit('login');\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tif (res.Data.consumer_type == 3) {\r\n\t\t\t\t\t\t\t\t\t// if(true){\r\n\t\t\t\t\t\t\t\t\t// 安装员\r\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/main/serverCenter/serverCenter'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// 推广者 消费者 3是安装\r\n\t\t\t\t\t\t\t\t\t// uni.switchTab({\r\n\t\t\t\t\t\t\t\t\t// \turl: '/pages/main/main'\r\n\t\t\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t\t\t\tif (that.shareUser && that.sharePro && that.shareOrder) {\r\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/main/details/details?code=' + that.sharePro\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/main/main'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, 500)\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.$ui.toast(res.Msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (callback) callback();\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log('请求结果false : ' + err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.pages {\r\n\t\tbackground: #fff;\r\n\t\tjustify-content: flex-start;\r\n\r\n\t\t.logo {\r\n\t\t\twidth: 130rpx;\r\n\t\t\theight: 130rpx;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tmargin: 177rpx auto 28rpx auto;\r\n\t\t}\r\n\r\n\t\t.name {\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: #333;\r\n\t\t\tmargin-bottom: 70rpx;\r\n\t\t}\r\n\r\n\t\t.text {\r\n\t\t\tcolor: #999;\r\n\t\t\tline-height: 1.2;\r\n\t\t}\r\n\r\n\t\t.btns {\r\n\t\t\tmargin-top: 36rpx;\r\n\t\t\twidth: 346rpx;\r\n\t\t\tline-height: 80rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tborder-radius: 40rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tbackground-color: #08c163;\r\n\t\t\tbox-shadow: 0 4rpx 4rpx #08c163;\r\n\t\t}\r\n\r\n\t\t.formBox {\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 48rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tcolor: #08c163;\r\n\t\t\t}\r\n\r\n\t\t\t.inputBoxs {\r\n\t\t\t\t// justify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tline-height: 86rpx;\r\n\t\t\t\theight: 86rpx;\r\n\r\n\t\t\t\t.inp {\r\n\t\t\t\t\twidth: 80%\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&id=b237504c&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1624457130623\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}