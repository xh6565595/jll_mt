(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1ba6":function(e,t,a){"use strict";(function(e){a("1f76");r(a("66fd"));var t=r(a("b72a"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},5283:function(e,t,a){"use strict";a.r(t);var r=a("d357"),n=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t["default"]=n.a},"64d0":function(e,t,a){"use strict";var r=a("bb16"),n=a.n(r);n.a},b72a:function(e,t,a){"use strict";a.r(t);var r=a("face"),n=a("5283");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("64d0");var i,s=a("f0c5"),u=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"2bbf541c",null,!1,r["a"],i);t["default"]=u.exports},bb16:function(e,t,a){},d357:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("4795"));n(a("152e")),n(a("a4ba"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a,r,n,o,i){try{var s=e[o](i),u=s.value}catch(c){return void a(c)}s.done?t(u):Promise.resolve(u).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){o(i,r,n,s,u,"next",e)}function u(e){o(i,r,n,s,u,"throw",e)}s(void 0)}))}}var s={data:function(){return{loadModal:!0,updatedInfo:{},result:"",effective:"",formParams:{openId:"",vilidate:"",mobile:"",invitation:"",nickname:"",headimgurl:"",share_user_id:""},seconds:0,time:null,iviCode:"",shareData:""}},onLoad:function(t){var a=this,n="";if(t.q){var o=decodeURIComponent(t.q);n=o.split("icode=")[1]}else t.icode&&(n=t.icode);console.log(n),this.shareData={proCode:t.pcode?t.pcode:"",userId:t.ucode?t.ucode:"",odrCode:t.ocode?t.ocode:"",iviCode:n||""},(a.shareData.proCode||a.shareData.userId||a.shareData.odrCode||a.shareData.iviCode)&&a.$store.commit("setShare",{proCode:a.shareData.proCode,userId:a.shareData.userId,orderCode:a.shareData.odrCode,iviCode:a.shareData.iviCode}),e.login({provider:"weixin",success:function(){var e=i(r.default.mark((function e(t){var n;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.code,e.next=3,a.getopId(n);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()})},computed:{},methods:{getopId:function(t){var a=this;return i(r.default.mark((function n(){var o,i,s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=a,r.prev=1,a.$ui.showloading(),r.next=5,a.$api.GetOpenId({wx_code:t},!1);case 5:i=r.sent,i.Success?(s=i.Msg,e.setStorageSync("jll_opid",s),o.formParams.openId=s,o.autoLogin(s)):o.$ui.hideloading(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),o.$ui.hideloading();case 12:case"end":return r.stop()}}),n,null,[[1,9]])})))()},autoLogin:function(t){var a=this;return i(r.default.mark((function n(){var o,i;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=a,r.prev=1,r.next=4,a.$api.WxTokenLogin({openId:t},!1);case 4:i=r.sent,a.$ui.hideloading(),i.Success?(o.$store.commit("login"),e.setStorageSync("access_token",i.Data.hp),o.initUser()):(a.$ui.hideloading(),i.Msg&&"用户不存在"!=i.Msg&&a.$ui.toast(i.Msg),o.shareData.proCode&&o.shareData.userId&&o.shareData.odrCode?e.redirectTo({url:"/pages/main/details/details?code="+o.shareData.proCode}):e.switchTab({url:"/pages/main/main"})),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](1),a.$ui.hideloading(),a.$ui.toast(r.t0);case 13:case"end":return r.stop()}}),n,null,[[1,9]])})))()},initUser:function(t){var a=this;return i(r.default.mark((function n(){var o,i;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=a,r.prev=1,r.next=4,a.$api.getConsumer({},!1);case 4:i=r.sent,i.Success?i.Data&&(o.$store.commit("setUserInfo",i.Data),setTimeout((function(){3==i.Data.consumer_type?e.redirectTo({url:"/pages/main/serverCenter/serverCenter"}):o.shareData.proCode&&o.shareData.userId&&o.shareData.odrCode?e.redirectTo({url:"/pages/main/details/details?code="+o.shareData.proCode}):e.switchTab({url:"/pages/main/main"})}),500)):o.$ui.toast(i.Msg),t&&t(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),console.log("请求结果false : "+r.t0);case 12:case"end":return r.stop()}}),n,null,[[1,9]])})))()}}};t.default=s}).call(this,a("543d")["default"])},face:function(e,t,a){"use strict";var r,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return r}))}},[["1ba6","common/runtime","common/vendor"]]]);