(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/share/share"],{"1c13":function(t,e,n){"use strict";var o=n("7a65"),i=n.n(o);i.a},"2fd6":function(t,e,n){"use strict";(function(t){n("6b7d");o(n("66fd"));var e=o(n("5c8d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"5c8d":function(t,e,n){"use strict";n.r(e);var o=n("8b99"),i=n("68c5");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("1c13");var a,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"5e7dd41c",null,!1,o["a"],a);e["default"]=c.exports},"68c5":function(t,e,n){"use strict";n.r(e);var o=n("6efd"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"6efd":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n("4795")),i=s(n("c901")),r=s(n("e53d")),a=n("ad1b");function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o,i,r,a){try{var s=t[r](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(o,i)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){c(r,o,i,a,s,"next",t)}function s(t){c(r,o,i,a,s,"throw",t)}a(void 0)}))}}var l=function(){Promise.all([n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(function(){return resolve(n("7f2c"))}.bind(null,n)).catch(n.oe)},f={data:function(){return{providerList:[],sourceLink:i.default.mainUrl+"/register.html",type:0,usrMsg:"",shareUrl:"",iconUrl:"../../../static/img/logo.jpg",ewmLocalUrl:"",poster:{},currentBg:1,qrShow:!1,showLoading:!1,canvasId:"default_PosterCanvasId"}},computed:{levelAccount:function(){return this.$store.state.levelAccount},userInfo:function(){return this.$store.state.userInfo}},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"分享好友，马桶免费拿",query:"code=".concat(this.userInfo.invitation_code),imageUrl:"/static/share.jpg"}},onLoad:function(){this.usrMsg=this.userInfo,this.shareUrl="https://gllo.kuxiong999.com/miniprogram?code=".concat(this.userInfo.invitation_code)},components:{tkiQrcode:l},methods:{choose:function(t){this.currentBg=t},shareFc:function(){var e=this;return u(o.default.mark((function n(){var i,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e,n.prev=1,t.showLoading({}),n.next=5,(0,a.getSharePoster)({_this:e,type:"testShareType",formData:{},bgScale:1,posterCanvasId:e.canvasId,delayTimeScale:20,backgroundImage:"/static/defaultshare"+i.currentBg+".jpg",drawArray:function(t){var e=t.bgObj;t.type,t.bgScale,e.width,e.width,e.height;return new Promise((function(t,n){t([{type:"qrcode",text:i.shareUrl,size:.3*e.width,dx:.7*e.width/2,dy:.4*e.height-4},{type:"text",text:"邀请人："+i.userInfo.invitation_code,size:23,color:"#333",alpha:1,textAlign:"center",textBaseline:"middle",infoCallBack:function(t){return r.default.log("index页面的text的infocallback ，textlength:"+t),{dx:e.width/2,dy:.35*e.height}},serialNum:0},{type:"text",text:"邀请码："+i.usrMsg.invite_code,size:24,color:"#fff",alpha:1,textAlign:"top",textBaseline:"middle",infoCallBack:function(t){return r.default.log("index页面的text的infocallback ，textlength:"+t),{dx:e.width/2,dy:.69*e.height+18}},serialNum:0}])}))},setCanvasWH:function(t){var n=t.bgObj;t.type,t.bgScale;console.log(n),e.poster=n}});case 5:s=n.sent,e.poster.finalPath=s.poster.tempFilePath,e.qrShow=!0,t.hideLoading(),n.next=16;break;case 11:n.prev=11,n.t0=n["catch"](1),r.default.hideLoading(),r.default.showToast(JSON.stringify(n.t0)),t.hideLoading();case 16:case"end":return n.stop()}}),n,null,[[1,11]])})))()},qrRstoreUrl:function(t){},saveImage:function(){t.saveImageToPhotosAlbum({filePath:this.poster.finalPath,success:function(t){r.default.showToast("保存成功")}})},share:function(){r.default.showToast("分享了")},hideQr:function(){this.qrShow=!1},qrR:function(t){this.ewmLocalUrl=t},copy:function(){var e=this;t.setClipboardData({data:this.usrMsg.invite_code,success:function(){t.showModal({title:"复制邀请码成功",content:e.usrMsg.invite_code,showCancel:!1,success:function(t){t.confirm||t.cancel}})}})},sharurl:function(){var e=this;t.setClipboardData({data:e.shareUrl,success:function(){t.showModal({title:"复制成功",showCancel:!1,success:function(t){t.confirm||t.cancel}})}})},save:function(){var e=this;t.showActionSheet({itemList:["保存图片到相册"],success:function(){t.saveImageToPhotosAlbum({filePath:e.ewmLocalUrl,success:function(){t.showToast({title:"保存成功",icon:"none"})}})}})},_share:function(e){var n=this;t.share({provider:this.providerList[e].id,scene:this.providerList[e].type&&"WXSenceTimeline"==this.providerList[e].type?"WXSenceTimeline":"WXSceneSession",type:2,title:"酷熊优购",summary:"邀您下载酷熊APP，让您淘宝天猫购物省钱",imageUrl:n.poster.finalPath,href:this.shareUrl,success:function(t){},fail:function(e){t.showModal({content:e.errMsg,showCancel:!1})}})},openLink:function(){}}};e.default=f}).call(this,n("543d")["default"])},"7a65":function(t,e,n){},"8b99":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))}},[["2fd6","common/runtime","common/vendor"]]]);