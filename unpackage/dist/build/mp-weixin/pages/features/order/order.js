(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/features/order/order"],{4189:function(e,t,n){},"48ff":function(e,t,n){"use strict";var r={sunTab:function(){return n.e("components/sun-tab/sun-tab").then(n.bind(null,"57a1"))}},a=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r}))},"4caf":function(e,t,n){"use strict";n.r(t);var r=n("846e"),a=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,(function(){return r[e]}))}(c);t["default"]=a.a},5123:function(e,t,n){"use strict";(function(e){n("1f76");r(n("66fd"));var t=r(n("9745"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"6cce":function(e,t,n){"use strict";var r=n("4189"),a=n.n(r);a.a},"846e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("4795"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,a,c,s){try{var u=e[c](s),o=u.value}catch(i){return void n(i)}u.done?t(o):Promise.resolve(o).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function u(e){c(s,r,a,u,o,"next",e)}function o(e){c(s,r,a,u,o,"throw",e)}u(void 0)}))}}var u=function(){n.e("components/sun-tab/sun-tab").then(function(){return resolve(n("57a1"))}.bind(null,n)).catch(n.oe)},o=function(){Promise.all([n.e("common/vendor"),n.e("pages/features/order/orderList/orderList")]).then(function(){return resolve(n("f690"))}.bind(null,n)).catch(n.oe)},i={data:function(){return{tabObjectList:[{name:"全部",value:0},{name:"待付款",value:1},{name:"待发货",value:2},{name:"待收货",value:3},{name:"已签收",value:5}],current:0,modal:!1,refundModal:!1,currentCode:"",content:"确认发起退货？",action:"",ems_code:""}},components:{sunTab:u,OrderList:o},onLoad:function(t){t.current&&(this.current=parseInt(t.current),this.$nextTick((function(){this.$refs["list".concat(this.current)]._loadData("refresh")})));var n=this;e.$on("refresh_order",(function(){n._refresh()}))},onPullDownRefresh:function(){var t=this.current;this.$refs["list".concat(t)]._loadData("refresh"),setTimeout((function(){e.stopPullDownRefresh()}),1e3)},methods:{_back:function(){e.switchTab({url:"/pages/user/user"})},objectChange:function(e){this.current=parseInt(e.tab.value)},_change:function(e){this.current=parseInt(e.detail.current),this.$refs["list".concat(this.current)]._loadData("refresh")},refreshCurrent:function(e){console.log(JSON.stringify(e))},refund:function(e){var t=e.order_code,n=e.order_status;1==n?(this.action="refund",this.content="确认发起退款退货？",this.currentCode=t,this.modal=!0):3==n&&(this.currentCode=t,this.refundModal=!0)},sure:function(e){this.action="sure",this.content="您确认要收货？",this.currentCode=e,this.modal=!0},cancel:function(e){this.action="cancel",this.content="你确认取消该订单？",this.currentCode=e,this.modal=!0},hide:function(){this.refundModal=!1,this.modal=!1},handleClick:function(e){var t=e.index;0===t||("refund"==this.action?this._agreeRefund(!1):"sure"==this.action?this._sure():"cancel"==this.action&&this._cancel()),this.modal=!1},_agreeRefund:function(e){var t=this;return s(r.default.mark((function n(){var a,c,s;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t,!e||t.ems_code){n.next=4;break}return t.$ui.toast("请输入物流单号"),n.abrupt("return");case 4:return t.refundModal=!1,n.prev=5,c={order_code:t.currentCode},e&&(c.ems_code=t.ems_code),n.next=10,t.$api.ApplyRefund(c,!1);case 10:s=n.sent,s.Success?(a.$ui.toast("退货申请成功"),setTimeout((function(){a._refresh()}),1e3)):a.$ui.toast(s.Msg),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](5),console.log("请求结果false : "+n.t0);case 17:case"end":return n.stop()}}),n,null,[[5,14]])})))()},_sure:function(){var e=this;return s(r.default.mark((function t(){var n,a,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.prev=1,a={order_code:e.currentCode},t.next=5,e.$api.Receiving(a,!1);case 5:c=t.sent,c.Success?(n.$ui.toast("收货成功"),setTimeout((function(){n._refresh()}),1e3)):n.$ui.toast(c.Msg),callback&&callback(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log("请求结果false : "+t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},_cancel:function(){var e=this;return s(r.default.mark((function t(){var n,a,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.prev=1,a={order_code:e.currentCode},t.next=5,e.$api.CancelOrder(a,!1);case 5:c=t.sent,c.Success?(n.$ui.toast("取消成功"),setTimeout((function(){n._refresh()}),1e3)):n.$ui.toast(c.Msg),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log("请求结果false : "+t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},_refresh:function(){this.$refs.list0._loadData("refresh"),this.$refs.list1._loadData("refresh"),this.$refs.list2._loadData("refresh"),this.$refs.list3._loadData("refresh"),this.$refs.list4._loadData("refresh")}}};t.default=i}).call(this,n("543d")["default"])},9745:function(e,t,n){"use strict";n.r(t);var r=n("48ff"),a=n("4caf");for(var c in a)"default"!==c&&function(e){n.d(t,e,(function(){return a[e]}))}(c);n("6cce");var s,u=n("f0c5"),o=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"d5ff1a68",null,!1,r["a"],s);t["default"]=o.exports}},[["5123","common/runtime","common/vendor"]]]);