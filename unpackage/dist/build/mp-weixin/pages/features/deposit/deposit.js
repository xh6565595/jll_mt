(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/features/deposit/deposit"],{"5eda":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("4795")),o=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,a,o,r,i){try{var c=t[r](i),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(a,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function c(t){i(r,a,o,c,s,"next",t)}function s(t){i(r,a,o,c,s,"throw",t)}c(void 0)}))}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={data:function(){return{bankList:[],formParams:{apply_money:"",validate:"",pay_password:"",alipay_account:""},currentBank:"",maxAccount:0,successmodal:!1,currentBackText:"",myAccount:"",fullname:"",seconds:0,payFlag:!1,paymentPwd:""}},onNavigationBarButtonTap:function(e){t.navigateTo({url:"/pages/user/depositHistory/depositHistory"})},onLoad:function(){},onShow:function(){console.log(this.userInfo),this.maxAccount=this.accountInfo.agent_blance,this.myAccount=this.userInfo.mobile,this.formParams.alipay_account=this.userInfo.alipay_account;t.getStorageSync("hasPayPass")},computed:u({},(0,o.mapState)(["hasLogin","userInfo","accountInfo"])),watch:{bankRefreshHandle:function(t,e){this._getList()}},components:{},filters:{encrypt:function(t){var e=t.slice(4,-3),n=t.replace(e,"**** **** ****");return n}},methods:{_ok:function(){},allIn:function(){this.formParams.apply_money=this.maxAccount},cancelPass:function(){t.showToast({icon:"none",title:"取消兑换"}),this.payFlag=!1},checkPwd:function(e){e?(this.formParams.pay_password=e,this.validatePass(e),this.payFlag=!1):t.showToast({icon:"none",title:"取消兑换"})},_closeKeyBoard:function(){t.hideKeyboard()},_getCode:function(){var e=this;return c(a.default.mark((function n(){var o,r,i,c;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.effective){n.next=2;break}return n.abrupt("return");case 2:return o=e,r={mobile:e.myAccount,type:8},n.prev=4,n.next=7,e.$api.getValidCode(r);case 7:i=n.sent,console.log(JSON.stringify(i)),1==i.result?(t.showToast({title:"验证码已发送",position:"bottom"}),o.effective=!0,o.seconds=60,c=setInterval((function(){o.seconds-=1,0==o.seconds&&(o.effective=!1,clearInterval(c))}),1e3)):t.showToast({icon:"none",title:i.data}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](4),console.log("请求结果false : "+n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})))()},onInput:function(t){var e=this,n=t.detail.value,a=n.split(".");this.time&&(clearTimeout(this.time),this.time=""),this.time=setTimeout((function(){var t=n;a[1]&&a[1].length>=2&&(t=n.match(/^\d+\.(\d){2}/)[0]),Number(t)>=e.maxAccount&&(t=e.maxAccount),e.formParams.apply_money=t,clearTimeout(e.time),e.time=""}),500)},_valide:function(){},PickerChange:function(t){var e=t.detail.value;this.currentBank=this.bankList[e].card_bank,this.currentBackText=this.bankList[e].card_num,this.formParams.cash_card=this.bankList[e].card_code},_submit:function(){var e=this.formParams.apply_money;if(console.log(JSON.stringify(this.formParams)),this.formParams.apply_money)if(this.formParams.validate){if(e=Number(e).toFixed(2),console.log(e),e>this.maxAccount)return t.showToast({icon:"",title:"超出最大限额"}),void(this.formParams.apply_money=this.maxAccount);this.payFlag=!0}else t.showToast({icon:"none",title:"请输入验证码"});else t.showToast({icon:"none",title:"请输入有效金额"})},validatePass:function(e){var n=this;return c(a.default.mark((function e(){var o,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=n,e.prev=1,plus.nativeUI.showWaiting("处理中,请稍后..."),e.next=5,n.$api.userSubmitCash(n.formParams);case 5:r=e.sent,plus.nativeUI.closeWaiting(),1==r.result?(t.$emit("refresh_user"),o.$refs.successModal.show()):t.showModal({title:"密码错误",content:"立即否重置密码？",confirmText:"立即重置",success:function(e){e.confirm?t.navigateTo({url:"/pages/role/updatedPayPass/updatedPayPass"}):e.cancel&&console.log("用户点击取消")}}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log("请求结果false : "+e.t0),plus.nativeUI.closeWaiting();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}};e.default=f}).call(this,n("543d")["default"])},"731d":function(t,e,n){},b469:function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},bca0:function(t,e,n){"use strict";(function(t){n("6b7d");a(n("66fd"));var e=a(n("f1e2"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},bfc0:function(t,e,n){"use strict";n.r(e);var a=n("5eda"),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=o.a},c6e8:function(t,e,n){"use strict";var a=n("731d"),o=n.n(a);o.a},f1e2:function(t,e,n){"use strict";n.r(e);var a=n("b469"),o=n("bfc0");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("c6e8");var i,c=n("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"983b12a4",null,!1,a["a"],i);e["default"]=s.exports}},[["bca0","common/runtime","common/vendor"]]]);